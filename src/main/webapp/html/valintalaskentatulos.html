<h1>Valinnat</h1>

<div ng-include="'partials/topNavigation.html'" />

<div toggletoolbar class="tabsheets">
	<!--
		  toolbarcontainer toggle-off="grid16-1" toggle-on="grid16-5" 
 	-->
    <div  toolbarcontainer class="grid16-5" ng-include="'partials/hakukohdelista.html'"></div>
    <div contentcontainer class="grid16-11">
        <div ng-include="'partials/hakukohdeNavigation.html'" />

		<div class="tabsheets">
            
            <h1>{{hakukohdeModel.hakukohde.hakukohdeKoodistoNimi}}</h1>

            <p ng-hide="model.valinnanvaiheet" class="notification info">Kohteelle ei ole vielä suoritettu valintalaskentaa</p>
			<a ng-show="model.valinnanvaiheet" href="{{valintalaskentatulosExcelExport}}" class="button small excel">Vie exceliin</a>
            
            
            
            <!--
            <a href="#" class="button small disabled">Hyväksy valintaesitys</a>
             -->
            <div ng-repeat="valinnanvaihe in model.valinnanvaiheet">
                    
                <h3>Valinnanvaihe OID: <span ng-bind="valinnanvaihe.valinnanvaiheoid">-</span></h3>
                <h3>Päivämäärä: <span ng-bind="valinnanvaihe.createdAt | date:'dd.MM.yyyy HH:mm:ss'">-</span></h3>
                <div ng-repeat="valintatapajono in valinnanvaihe.valintatapajono">
                    <h3>Valintatapajono: {{valintatapajono.nimi}} (v.{{valintatapajono.versio}})</h3>
                    <table class="virkailija-table-1">
                        <thead>
                            <tr>
                                <th>Jonosija</th>
                                <th>Hakija</th>
                                <th>Hakemus</th>
                                <th>Valintatieto</th>
                                <th>Selite</th>
                                <th>Pistemäärä</th>
                                <th>Harkinnanvarainen hakemus</th>
                                <th>Historia</th>
                            </tr>
                        </thead>
                        <tbody ng-repeat="tulos in valintatapajono.jonosijat">
                            <tr>
                                <td>{{tulos.jonosija}}</td>
                                <td>{{tulos.sukunimi}}, {{tulos.etunimi}}</td>
                                <td>
                                    <a href="{{HAKEMUS_UI_URL_BASE}}/virkailija/hakemus/{{hakuOid}}/yhteishaku/esikatselu/{{tulos.hakemusoid}}" target="_blank" >
                                        {{tulos.hakemusoid}}
                                    </a>
                                </td>
                                <td>{{tulos.tuloksenTila}}</td>
                                <td>
                                    <div ng-show="tulos.kuvaus"><span class="bold">Jonosija:</span> {{tulos.kuvaus}}</div>
                                    <div ng-repeat="jarjestyskriteeri in tulos.jarjestyskriteerit"><span ng-show="jarjestyskriteeri.kuvaus" class="bold">Järjestyskriteeri {{$index}}:</span> {{jarjestyskriteeri.kuvaus}}</div>
                                </td>
                                <td><span ng-repeat="jarjestyskriteeri in tulos.jarjestyskriteerit" > {{jarjestyskriteeri.arvo}}<span ng-show="jarjestyskriteeri.arvo==undefined">-</span> <span ng-show="(tulos.jarjestyskriteerit.length - 1) === $index"> / </span></span>
                                </td>
                                <td>
                                    <input type="checkbox" ng-model="tulos.harkinnanvarainen" disabled />
                                    <a ng-show="tulos.harkinnanvarainen" ng-click="showHistory(tulos.historiat)" class="button small">Hyväksy harkinnanvaraisesti</a>
                                </td>
                                <td><a ng-click="showHistory(tulos.historiat)" class="button small">Avaa</a></td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>
		</div>
	</div>
	<div class="clear"></div>
</div>
