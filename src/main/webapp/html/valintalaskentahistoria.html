<h1>Valintalaskentahistoria</h1>

<h1>{{model.get()[0].funktio}}</h1>
<button ng-click="logmodel()">log model object</button>
<div class="tabs">
	<a class="tab" ng-class="$index === historyTabIndex ? 'current' : ''" ng-click="changeTab($index)" ng-repeat="historia in model.get()"><span>{{$index + 1}}. Järjestyskriteeri</span></a>
</div>
<div class="clear"></div>

<div class="tabsheets">
	<ul class="valintalaskentaHistoria" ng-show="$index === historyTabIndex" ng-repeat="historia in model.get()" ng-include="'historia_node.html'"></ul>
</div>

<script type="text/ng-template" id="historia_node.html">
	<li><strong>Tulos:</strong> {{historia.tulos}}</li>

	<li>
		<span><strong>Tila:</strong> {{historia.tilat[0].tilatyyppi}}</span>
		<span ng-show="historia.tilat[0].tilatyyppi === 'HYLATTY'" class="red">{{historia.tilat[0].kuvaus}}</span>
	</li>
	
	<button class="small" ng-init="keys = false" ng-click="keys = !keys">Näytä/Piilota avaimet</button>
	
	<ul ng-show="keys" class="avaimet">
		<li class="padding-vertical-1" ng-repeat="(key, value) in historia.avaimet track by $index">
			<strong>{{key}}</strong> - <span>{{value}}</span>
		</li> 
	</ul>
	
	<ul class="alikaavat margin-top-4" ng-init="show = 'true'" ng-show="show">	
		<li ng-repeat="kaava in historia.historiat" ng-include="'alikaava_node.html'"></li>
	</ul>

</script>

<script type="text/ng-template" id="alikaava_node.html">
	<li ng-show="kaava.funktio === 'Nimetty lukuarvo'"><h3>{{kaava.avaimet.nimi}} <span ng-show="kaava.tulos">(tulos: {{kaava.tulos}})</span></h3></li>
	<li ng-show="kaava.funktio !== 'Nimetty lukuarvo'"><h3>{{kaava.funktio}}</h3></li>
	<li ng-show="kaava.NL">Onko noden jollakin lapsella nimetty lukuarvo -funktio: {{kaava.NL}}</li>
	<!--
	<li>Alipuusta löytyy nimetty lukuarvo -funktio: {{kaava.NL}}</li>
	-->
	<li ng-show="kaava.funktio !== 'Nimetty lukuarvo'">{{kaava.avaimet.nimi}}</li>
	<ul class="alikaavat margin-top-4" ng-init="show = true" ng-show="show">	
		<li ng-repeat="kaava in kaava.historiat" ng-include="'alikaava_node.html'"></li>
	</ul>
</script>