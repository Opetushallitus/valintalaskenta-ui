<h1>Valinnat</h1>

<div ng-include="'partials/topNavigation.html'"/>

<div class="tabsheets">
    <h1>Haun hallinta</h1>

    <dl class="dl-horizontal">
		<dt>Haun oid</dt><dd>{{hakumodel.hakuOid.oid}}</dd>
        <dt>Haun tunniste</dt><dd>{{hakumodel.hakuOid.haunTunniste}}</dd>
        <dt>Hakuvuosi</dt><dd>{{hakumodel.hakuOid.hakuVuosi}}</dd>
        <dt>Haun tila</dt><dd>{{hakumodel.hakuOid.haunTila}}</dd>
	</dl>

    <p>
        <a ng-show="privileges.valintalaskenta" ng-click="kaynnistaSijoittelu()" class="button primary small">Suorita sijoittelu</a>
        <a ng-show="privileges.valintalaskenta" ng-click="aktivoiHaunValintalaskenta()" class="button primary small">Suorita valintalaskenta haulle</a>
    </p>
    <p>
        <a ng-show="privileges.valintalaskenta" ng-click="showErros()" class="button small">Näytä virheet haulle</a>
    </p>

    <div ng-repeat="virhe in virheet" class="hakuVirheet" ng-click="showHakukohde(virhe)">
        <h3><a href="" >{{virhe.showValinnanvaihe ? '-' : '+'}} </a>Hakukohde: {{ virhe.hakukohdeoid }} ({{ virhe.createdAt | date:'dd.MM.yyyy HH:mm:ss'}})</h3>
        <div ng-repeat="vaihe in virhe.valinnanvaihe" ng-show="virhe.showValinnanvaihe" class="valinnanvaihe">
            <h3>Vaiheet: {{vaihe.valinnanvaiheoid}} / {{vaihe.jarjestysnumero}} ({{vaihe.createdAt | date:'dd.MM.yyyy HH:mm:ss'}})</h3>

            <div ng-repeat="valintatapajono in vaihe.valintatapajono"  class="valintatapajono">
                <h3>{{valintatapajono.nimi}}: {{valintatapajono.valintatapajonooid}}</h3>

                <div ng-repeat="jonosijat in valintatapajono.jonosijat"  class="jonosija" ng-click="stopPropagination($event)">
                    <dl class="dl-horizontal">
                        <dt>Hakemus</dt>
                        <dd>{{jonosijat.hakemusOid}}</dd>

                        <dt>hakijaOid</dt>
                        <dd>{{jonosijat.hakijaOid}}</dd>

                        <dt>prioriteetti</dt>
                        <dd>{{jonosijat.prioriteetti}}</dd>

                        <dt>nimi</dt>
                        <dd>{{jonosijat.sukunimi}}, {{jonosijat.etunimi}}</dd>

                        <dt>harkinnanvarainen</dt>
                        <dd>{{jonosijat.harkinnanvarainen}}</dd>
                    </dl>

                    <div ng-repeat="(key, value) in jonosijat.jarjestyskriteerit"  class="jarjestyskriteeri">
                        <h3>Jarjestyskriteeri({{key}}) - {{value.kuvaus}}</h3>

                    </div>

                </div>
            </div>
        </div>
    </div>
    <div class="clear"></div>
</div>