
<h1>{{ t('valvomo.header') || 'Valvomo' }}</h1>

<div class="tabs hakukohdeNav" ng-controller="navigationController">

    <a href="#/valvomo/valintalaskenta" ng-class="{current: (valittu=='valintalaskenta')}" class="tab">
        <span>{{ t('valvomo.valintalaskenta') || 'Valintalaskenta' }}</span>
    </a>

    <a href="#/valvomo/valintakoelaskenta" ng-class="{current: (valittu=='valintakoelaskenta')}" class="tab">
        <span>{{ t('valvomo.valintakoelaskenta') || 'Valintakoelaskenta' }}</span>
    </a>

    <a href="#/valvomo/sijoittelu" ng-class="{current: (valittu=='sijoittelu')}" class="tab">
        <span>{{ t('valvomo.sijoittelu') || 'Sijoittelu' }}</span>
    </a>

    <a href="#/valvomo/hakuimport" ng-class="{current: (valittu=='hakuimport')}" class="tab">
        <span>{{ t('valvomo.hakuimport') || 'Hakuimport' }}</span>
    </a>

    <a href="#/valvomo/valintalaskentamuistissa" ng-class="{current: (valittu=='valintalaskentamuistissa')}" class="tab">
        <span>{{ t('valvomo.valintalaskentamuistissa') || 'valintalaskentamuistissa' }}</span>
    </a>

</div>
<div class="tabsheets">

    <div ng-repeat="prosessi in valintalaskenta" ng-if="valittu == 'valintalaskenta'">
        {{ t('valvomo.viesti') || 'Viesti' }}: <span>{{prosessi.message}}</span><br/>
        {{ t('valvomo.status') || 'Status' }}: <span>{{prosessi.status}}</span><br/>
        {{ t('valvomo.kesto') || 'Kesto' }}: <span>{{prosessi.duration | duration}}</span><br/>
        <br/>
        {{ t('valvomo.toiminto') || 'Toiminto' }}: <span>{{prosessi.prosessi.toiminto}}</span><br/>
        {{ t('valvomo.kayttaja') || 'Käyttäjä' }}: <span>{{prosessi.prosessi.createdBy}}</span><br/>
        {{ t('valvomo.aika') || 'Aika' }}: <span>{{prosessi.prosessi.createdAt | date:'dd.MM.yyyy HH:mm'}}</span><br/>
        <br/>
        {{ t('valvomo.hakukohteita') || 'Hakukohteita' }}: <span>{{prosessi.prosessi.kasitellytHakukohteet.length}} / {{prosessi.prosessi.hakukohteitaYhteensa}}</span><br/>
        <div ng-if="prosessi.prosessi.valinnanvaihe">{{ t('valvomo.valinnanvaihe') || 'Valinnan vaihe' }}: <span>{{prosessi.prosessi.valinnanvaihe}}</span><br/></div>

        <div ng-repeat="virhe in prosessi.prosessi.exceptions">{{virhe}}<br /></div>

        <!--<svg ng-if="$index == 0 && prosessi.prosessi.hakukohteitaYhteensa > 0" style="border: 2px solid #8DADB9; background: #efffff"-->
             <!--ng-attr-height="{{y(prosessi.prosessi.hakukohteitaYhteensa)+(gap+size)}}"-->
             <!--ng-attr-width="{{width*(gap+size)}}">-->
            <!--<rect ng-repeat="r in range(prosessi.prosessi.hakukohteitaYhteensa) track by $index"-->
                  <!--ng-attr-y="{{1+y($index)}}" ng-attr-x="{{1+x($index)}}"-->
                  <!--ng-attr-width="{{blockSize($index)}}" ng-attr-height="{{blockSize($index)}}"-->
                  <!--ng-attr-fill="{{fill($index, prosessi.prosessi.kasitellytHakukohteet.length, prosessi.prosessi.exceptions.length)}}"-->
                  <!--stroke="#acc" stroke-width="1" stroke-linejoin="round"></rect>-->
        <!--</svg>-->
        <hr/>
    </div>

    <div ng-repeat="prosessi in valintalaskentamuistissa" ng-if="valittu == 'valintalaskentamuistissa'">
        {{ t('valvomo.viesti') || 'Viesti' }}: <span>{{prosessi.message}}</span><br/>
        {{ t('valvomo.status') || 'Status' }}: <span>{{prosessi.status}}</span><br/>
        {{ t('valvomo.kesto') || 'Kesto' }}: <span>{{prosessi.duration | duration}}</span><br/>
        {{ t('valvomo.kestoaloituksesta') || 'Kesto aloituksesta' }}: <span>{{prosessi.durationSinceStarted | duration}}</span><br/>
        <br/>
        {{ t('valvomo.resurssi') || 'Resurssi' }}: <span>{{prosessi.prosessi.resurssi}}</span><br/>
        {{ t('valvomo.toiminto') || 'Toiminto' }}: <span>{{prosessi.prosessi.toiminto}}</span><br/>
        {{ t('valvomo.kayttaja') || 'Käyttäjä' }}: <span>{{prosessi.prosessi.createdBy}}</span><br/>
        {{ t('valvomo.aika') || 'Aika' }}: <span>{{prosessi.prosessi.createdAt | date:'dd.MM.yyyy HH:mm'}}</span><br/>
        <br/>

        <div ng-repeat="virhe in prosessi.prosessi.exceptions">{{virhe}}<br /></div>

        <br/>

        <pre>{{prosessi.prosessi.tarjonnastaHakukohteet | json}}</pre>
        <pre>{{prosessi.prosessi.hakukohteilleHakemukset | json}}</pre>
        <pre>{{prosessi.prosessi.hakemukset | json}}</pre>
        <pre>{{prosessi.prosessi.valintaperusteet | json}}</pre>
        <pre>{{prosessi.prosessi.valintalaskenta | json}}</pre>
        <pre>{{prosessi.prosessi.kokonaistyo | json}}</pre>

        <hr/>
    </div>

    <div ng-repeat="prosessi in valintakoelaskenta" ng-if="valittu == 'valintakoelaskenta'">
        {{ t('valvomo.viesti') || 'Viesti' }}: <span>{{prosessi.message}}</span><br/>
        {{ t('valvomo.status') || 'Status' }}: <span>{{prosessi.status}}</span><br/>
        {{ t('valvomo.kesto') || 'Kesto' }}: <span>{{prosessi .duration | duration}}</span><br/>
        <br/>
        {{ t('valvomo.toiminto') || 'Toiminto' }}: <span>{{prosessi.prosessi.toiminto}}</span><br/>
        {{ t('valvomo.kayttaja') || 'Käyttäjä' }}: <span>{{prosessi.prosessi.createdBy}}</span><br/>
        {{ t('valvomo.aika') || 'Aika' }}: <span>{{prosessi.prosessi.createdAt | date:'dd.MM.yyyy HH:mm'}}</span><br/>
        <br/>
        {{ t('valvomo.hakuoid') || 'HakuOId' }}: <span>{{prosessi.prosessi.hakuOid}}</span><br/>

        <div ng-repeat="virhe in prosessi.prosessi.exceptions">{{virhe}}<br /></div>
        <hr/>
    </div>

    <div ng-repeat="prosessi in sijoittelu" ng-if="valittu == 'sijoittelu'">
        <pre>{{prosessi | json}}</pre>
        {{ t('valvomo.viesti') || 'Viesti' }}: <span>{{prosessi.message}}</span><br/>
        {{ t('valvomo.status') || 'Status' }}: <span>{{prosessi.status}}</span><br/>
        {{ t('valvomo.kesto') || 'Kesto' }}: <span>{{prosessi .duration | duration}}</span><br/>
        <br/>
        {{ t('valvomo.toiminto') || 'Toiminto' }}: <span>{{prosessi.prosessi.toiminto}}</span><br/>
        {{ t('valvomo.kayttaja') || 'Käyttäjä' }}: <span>{{prosessi.prosessi.createdBy}}</span><br/>
        {{ t('valvomo.aika') || 'Aika' }}: <span>{{prosessi.prosessi.createdAt | date:'dd.MM.yyyy HH:mm'}}</span><br/>
        <br/>
        <hr/>
    </div>

    <div ng-repeat="prosessi in hakuimport" ng-if="valittu == 'hakuimport'">
        {{ t('valvomo.viesti') || 'Viesti' }}: <span>{{prosessi.message}}</span><br/>
        {{ t('valvomo.status') || 'Status' }}: <span>{{prosessi.status}}</span><br/>
        {{ t('valvomo.kesto') || 'Kesto' }}: <span>{{prosessi.duration | duration}}</span><br/>
        <br/>
        {{ t('valvomo.toiminto') || 'Toiminto' }}: <span>{{prosessi.prosessi.toiminto}}</span><br/>
        {{ t('valvomo.kayttaja') || 'Käyttäjä' }}: <span>{{prosessi.prosessi.createdBy}}</span><br/>
        {{ t('valvomo.aika') || 'Aika' }}: <span>{{prosessi.prosessi.createdAt | date:'dd.MM.yyyy HH:mm'}}</span><br/>
        <br/>
        {{ t('valvomo.hakukohteitaimportoitu') || 'Hakukohteita luettu tarjonnasta' }}: <span>{{prosessi.prosessi.importoitu}} / {{prosessi.prosessi.hakukohteita}}</span><br/>
        {{ t('valvomo.hakukohteitatuotu') || 'Hakukohteita tuotu valintaperusteisiin' }}: <span>{{prosessi.prosessi.tuonti}} / {{prosessi.prosessi.hakukohteita}}</span><br/>

        <div ng-repeat="virhe in prosessi.prosessi.exceptions">{{virhe}}</div>

        <svg ng-if="$index == 0 && prosessi.prosessi.hakukohteita > 0" style="border: 2px solid #8DADB9; background: #efffff"
             ng-attr-height="{{y(prosessi.prosessi.hakukohteita)+(gap+size)}}"
             ng-attr-width="{{width*(gap+size)}}">
            <rect ng-repeat="r in range(prosessi.prosessi.hakukohteita) track by $index"
                  ng-attr-y="{{1+y($index)}}" ng-attr-x="{{1+x($index)}}"
                  ng-attr-width="{{blockSize($index)}}" ng-attr-height="{{blockSize($index)}}"
                  ng-attr-fill="{{fill($index, prosessi.prosessi.importoitu, prosessi.prosessi.exceptions.length)}}"
                  stroke="#acc" stroke-width="1" stroke-linejoin="round"></rect>
        </svg>

        <svg ng-if="$index == 0 && prosessi.prosessi.hakukohteita > 0" style="border: 2px solid #8DADB9; background: #efffff"
             ng-attr-height="{{y(prosessi.prosessi.hakukohteita)+(gap+size)}}"
             ng-attr-width="{{width*(gap+size)}}">
            <rect ng-repeat="r in range(prosessi.prosessi.hakukohteita) track by $index"
                  ng-attr-y="{{1+y($index)}}" ng-attr-x="{{1+x($index)}}"
                  ng-attr-width="{{blockSize($index)}}" ng-attr-height="{{blockSize($index)}}"
                  ng-attr-fill="{{fill($index, prosessi.prosessi.tuonti, prosessi.prosessi.exceptions.length)}}"
                  stroke="#acc" stroke-width="1" stroke-linejoin="round"></rect>
        </svg>
        <hr/>
    </div>

</div>