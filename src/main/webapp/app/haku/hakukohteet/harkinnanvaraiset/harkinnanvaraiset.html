<h1>{{ t('hakukohteetharkinnanvaraiset.header') || 'Valintojen toteuttaminen' }}</h1>
<div ng-include="'haku/topNavigation.html'" />

<div class="tabsheets">

    <div ng-include="'haku/hakukohdelista.html'"></div>

    <div class="toggle-content-container overflow-x-scroll">

        <div ng-include="'../common/html/hakukohdeNimi.html'"></div>
        <div ng-include="'haku/hakukohteet/hakukohdeNavigation.html'" />

        <div class="tabsheets">

            <div ng-include="'../common/html/errors.html'"></div>
			
			<form method="post">
				  <textarea ui-tinymce="tinymceOptions" ng-model="tinymceModel"></textarea>
			</form>
			
            <div ng-show="model.hakeneet.length > 0" class="margin-vertical-2">
                <h2>{{ t('hakukohteetharkinnanvaraiset.harkinnanvaraisethakijat') || 'Harkinnanvaraiset hakijat' }}</h2>
                
                <input type="text" class="search margin-vertical-2" placeholder="Suodata hakijoita" ng-model="hakijaFilter" />
                <br>
                <a ng-click="muodostaKoekutsut();" class="btn btn-default btn-sm pdf">{{ t('hakukohteetharkinnanvaraiset.muodostakoekutsut') || 'Muodosta koekutsut' }}</a>
                <a ng-click="muodostaOsoitetarrat();" class="btn btn-default btn-sm pdf">{{ t('hakukohteetharkinnanvaraiset.muodostaosoitetarrat') || 'Muodosta osoitetarrat' }}</a>
                <br>
                <a ng-click="submit()" class="btn btn-primary btn-sm margin-top-2">{{ t('hakukohteetharkinnanvaraiset.tallenna') || 'Tallenna' }}</a>
                <pagination-pagesize page-size="pageSize"></pagination-pagesize>
                <form name="form" ng-submit="submit()">
                    <table class="virkailija-table-1">
                        <thead>
                            <tr>
                                <th><input type="checkbox" ng-change="model.checkAll();" ng-model="model.valittu"></th>
                                <th>{{ t('hakukohteetharkinnanvaraiset.nimi') || 'Nimi' }}</th>
                                <th>{{ t('hakukohteetharkinnanvaraiset.pohjakoulutus') || 'Pohjakoulutus' }}</th>
                                <th>{{ t('hakukohteetharkinnanvaraiset.harkinnanvarainentila') || 'Harkinnanvarainen tila' }}</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr ng-repeat="hakija in filteredResult = (model.hakeneet | filter: {hakenutHarkinnanvaraisesti:true} | filter:hakijaFilter) | startFrom:(currentPage-1)*pageSize | limitTo:pageSize">
                                <td><input type="checkbox" ng-change="model.check();" ng-model="hakija.valittu"></td>
                                <td class="leftorientedcolumn">
                                    <show-person-information sukunimi="{{hakija.lastName}}"
                                                             etunimi="{{hakija.firstNames}}"
                                                             hakemus-oid="{{hakija.oid}}"
                                                             haku-oid="{{hakuOid}}"
                                                             henkilo-oid="" />
                                </td>
                                <td>
                                    {{pohjakoulutukset[hakija.hakemus.answers.koulutustausta.POHJAKOULUTUS]}}
                                </td>
                                <td>

                                    <select ng-model="hakija.muokattuHarkinnanvaraisuusTila">
                                        <option value="HYVAKSYTTY">{{ t('hakukohteetharkinnanvaraiset.hyvaksytty') || 'Hyväksytty' }}</option>
                                        <option value="EI_HYVAKSYTTY">{{ t('hakukohteetharkinnanvaraiset.eihyvaksytty') || 'Ei Hyväksytty' }}</option>
                                    </select>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </form>
                <pagination previous-text="{{ t('hakukohteetharkinnanvaraiset.edellinen') || 'Edellinen' }}" next-text="{{ t('hakukohteetharkinnanvaraiset.seuraava') || 'Seuraava' }}" total-items="filteredResult.length" ng-model="currentPage" items-per-page="pageSize"></pagination>
                <a ng-click="submit()" class="btn btn-primary btn-sm margin-top-2" >{{ t('hakukohteetharkinnanvaraiset.tallenna') || 'Tallenna' }}</a>
            </div>
        </div>
    </div>

    <div class="clear"></div>
</div>
