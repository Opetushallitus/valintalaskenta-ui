<!DOCTYPE html>
<html ng-app="app">
<head>
    <title>Valintojen toteuttaminen</title>
    <!-- libs -->
    <script type="text/javascript" src="/valintalaskenta-ui/common/jslib/jquery.min.js"></script>
    <script type="text/javascript" src="/valintalaskenta-ui/common/jslib/jquery-ui.min.js"></script>
    <script type="text/javascript" src="/valintalaskenta-ui/common/jslib/lodash.underscore.min.js"></script>
    <script type="text/javascript" src="/valintalaskenta-ui/common/jslib/angular-file-upload-html5-shim.min.js"></script>
    <script type="text/javascript" src="/valintalaskenta-ui/common/jslib/angular.min.js"></script>
    <script type="text/javascript" src="/valintalaskenta-ui/common/jslib/angular-locale_fi-fi.js"></script>
    <script type="text/javascript" src="/valintalaskenta-ui/common/jslib/angular-resource.min.js"></script>
    <script type="text/javascript" src="/valintalaskenta-ui/common/jslib/angular-route.min.js"></script>
    <script type="text/javascript" src="/valintalaskenta-ui/common/jslib/angular-cache.min.js"></script>
    <script type="text/javascript" src="/valintalaskenta-ui/common/jslib/angular-animate.min.js"></script>
    <script type="text/javascript" src="/valintalaskenta-ui/common/jslib/angular-file-upload.min.js"></script>
    <script type="text/javascript" src="/valintalaskenta-ui/common/jslib/angular-translate.js"></script>
    <script type="text/javascript" src="/valintalaskenta-ui/common/jslib/static/jquery.nestable.js"></script>
    <script type="text/javascript" src="/valintalaskenta-ui/common/jslib/ui-bootstrap-tpls.min.js"></script>
    <script type="text/javascript" src="/valintalaskenta-ui/common/jslib/static/tinymce-4.0.12/tinymce.min.js"></script>
    <script type="text/javascript" src="/valintalaskenta-ui/common/jslib/static/tinymce-4.0.12/ui-tinymce.js"></script>
    <script type="text/javascript" src="/valintalaskenta-ui/common/jslib/ng-table.min.js"></script>

    <!--conf - generoidaan palvelimen käynnistyksen yhteydessä -->
    <script type="text/javascript"  src="/valintalaskenta-ui/configuration/configuration.js"></script>

    <link href="/valintalaskenta-ui/common/css/bootstrap-3.1.1/css/bootstrap.min.css" rel="stylesheet" type="text/css" />
    <link href="/valintalaskenta-ui/common/css/font-awesome-4.0.3/css/font-awesome.min.css" rel="stylesheet" type="text/css" />
    <link href="/valintalaskenta-ui/common/css/ng-table.min.css" rel="stylesheet" type="text/css" />
    <link href="/valintalaskenta-ui/common/css/virkailija.css" rel="stylesheet" type="text/css" />
    <link href="/valintalaskenta-ui/common/css/other.css" rel="stylesheet" type="text/css" />

    <script type="text/javascript" src="/valintalaskenta-ui/app/app.js"></script>
    <script type="text/javascript" src="/valintalaskenta-ui/app/app-routes.js"></script>
    <script type="text/javascript" src="/valintalaskenta-ui/app/app-resources.js"></script>
    <script type="text/javascript" src="/valintalaskenta-ui/common/js/lodash-module.js"></script>
    <script type="text/javascript" src="/valintalaskenta-ui/app/app-urls.js"></script>

    <script type="text/javascript" src="/valintalaskenta-ui/common/js/topnavigation/navigation.js"></script>
    <script type="text/javascript" src="/valintalaskenta-ui/common/js/loading.js"></script>
    <script type="text/javascript" src="/valintalaskenta-ui/common/js/services.js"></script>
    <script type="text/javascript" src="/valintalaskenta-ui/common/js/directives.js"></script>
    <script type="text/javascript" src="/valintalaskenta-ui/common/js/modal.js"></script>
    <script type="text/javascript" src="/valintalaskenta-ui/common/js/collapsible.js"></script>
    <script type="text/javascript" src="/valintalaskenta-ui/common/js/user.js"></script>
    <script type="text/javascript">
        var app = angular.module("app", ["ngResource","ngRoute"]);

        app.config(function($routeProvider){
            $routeProvider.when("/haku/:hakuOid/hakukohde/:hakukohdeOid",
                    {
                        templateUrl: "/valintalaskenta-ui/app/haku/hakukohteet/pistesyotto/nayta_kaikki/nayta_kaikki.html",
                        controller: "RootCtrl",
                        controllerAs: "app"
                    }
            );
        });
        app.factory('HakukohdeAvaimet', function($resource) {
            return $resource(VALINTAPERUSTEET_URL_BASE + "resources/hakukohde/avaimet/:hakukohdeOid",{hakukohdeOid: "@hakukohdeOid"}, {
                get: {method: "GET", isArray: true}
            });
        });
        app.factory('HakemusAdditionalData', function($resource) {
            return $resource(HAKEMUS_URL_BASE + "haku-app/applications/additionalData/:hakuOid/:hakukohdeOid", {hakuOid: "@hakuOid", hakukohdeOid: "@hakukohdeOid"}, {
                get: {method: "GET", isArray: true},
                put: {method: "PUT", isArray: true}
            });
        });
        app.controller("RootCtrl", function($scope, $http, $log, $resource, HakemusAdditionalData, HakukohdeAvaimet, $routeParams) { // HakemusAdditionalData
            $scope.predicate = ['lastName','firstNames'];

            HakemusAdditionalData.get({hakuOid: $routeParams.hakuOid, hakukohdeOid: $routeParams.hakukohdeOid}, function (result) {
                $scope.avaimet = result;
            });
            HakukohdeAvaimet.get({hakukohdeOid: $routeParams.hakukohdeOid}, function (result) {
                $scope.hakeneet = result;
            });
            /*
            $http.get("/valintalaskenta-ui/app/haku/hakukohteet/pistesyotto/avaimet.json").success(function(a) {
                $scope.avaimet = a;
            });
            $http.get("/valintalaskenta-ui/app/haku/hakukohteet/pistesyotto/additional.json").success(function(a) {
                $scope.hakeneet = a;
            });*/
            $scope.hakijaFilter = "";
        });
    </script>
</head>
<body ng-app="myApp" style="margin-left: 20px">
<ng-view></ng-view>
</body>
</html>